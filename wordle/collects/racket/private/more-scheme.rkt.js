import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/kernel.rkt.js";import * as M1 from "../../../runtime/paramz.rkt.js";var current_parameterization = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.continuation_mark_set_first(false,M1.parameterization_key);};var call_with_parameterization = function(paramz4069, thunk4070) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.parameterization_p(paramz4069)!==false) {var if_res2346 = M0.rvoid();} else {var if_res2346 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("call-with-parameterization"),$rjs_core.UString.make("parameterization?"),0,paramz4069,thunk4070);}if_res2346;if (M0.procedure_p(thunk4070)!==false) {var if_res2347 = M0.procedure_arity_includes_p(thunk4070,0);} else {var if_res2347 = false;}if (if_res2347!==false) {var if_res2348 = M0.rvoid();} else {var if_res2348 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("call-with-parameterization"),$rjs_core.UString.make("(-> any)"),1,paramz4069,thunk4070);}if_res2348;var __context2349 = $rjs_core.Marks.getFrames();var __context2350;try {__context2350 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.parameterization_key,paramz4069);var __wcm_result2351 = thunk4070();} finally {$rjs_core.Marks.updateFrame(__context2349,__context2350);}return __wcm_result2351;};var let_result2353 = M0.make_struct_type($rjs_core.PrimitiveSymbol.make("break-parameterization"),false,1,0,false);var struct_break_paramz = let_result2353.getAt(0);var make_break_paramz = let_result2353.getAt(1);var break_paramz_p = let_result2353.getAt(2);var break_paramz_ref = let_result2353.getAt(3);var break_paramz_set_bang_ = let_result2353.getAt(4);var let_result2354 = M0.make_struct_type($rjs_core.PrimitiveSymbol.make("break-parameterization"),false,1,0,false,M0.rnull,M0.current_inspector());var type4071 = let_result2354.getAt(0);var maker4072 = let_result2354.getAt(1);var pred4073 = let_result2354.getAt(2);var access4074 = let_result2354.getAt(3);var mutate4075 = let_result2354.getAt(4);var let_result2355 = M0.values(type4071,maker4072,pred4073,M0.make_struct_field_accessor(access4074,0,$rjs_core.PrimitiveSymbol.make("cell")),M0.make_struct_field_mutator(mutate4075,0,$rjs_core.PrimitiveSymbol.make("cell")));var struct_break_parameterization = let_result2355.getAt(0);var make_break_parameterization = let_result2355.getAt(1);var break_parameterization_p = let_result2355.getAt(2);var break_parameterization_cell = let_result2355.getAt(3);var set_break_parameterization_cell_bang_ = let_result2355.getAt(4);var current_break_parameterization = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return make_break_paramz(M0.continuation_mark_set_first(false,M1.break_enabled_key));};var call_with_break_parameterization = function(paramz4076, thunk4077) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (break_paramz_p(paramz4076)!==false) {var if_res2356 = M0.rvoid();} else {var if_res2356 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("call-with-break-parameterization"),$rjs_core.UString.make("break-parameterization?"),0,paramz4076,thunk4077);}if_res2356;if (M0.procedure_p(thunk4077)!==false) {var if_res2357 = M0.procedure_arity_includes_p(thunk4077,0);} else {var if_res2357 = false;}if (if_res2357!==false) {var if_res2358 = M0.rvoid();} else {var if_res2358 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("call-with-parameterization"),$rjs_core.UString.make("(-> any)"),1,paramz4076,thunk4077);}if_res2358;var __context2360 = $rjs_core.Marks.getFrames();var __context2361;try {__context2361 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,break_paramz_ref(paramz4076,0));M1.check_for_break();var __wcm_result2362 = thunk4077();} finally {$rjs_core.Marks.updateFrame(__context2360,__context2361);}var begin_res2359 = __wcm_result2362;M1.check_for_break();return begin_res2359;};var select_handler_by_no_breaks = function(e4078, bpz4079, l4080) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2371 = $rjs_core.Marks.getFrames();var __context2372;try {__context2372 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,M0.make_thread_cell(false));var loop4081 = function(l4082) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l4082)!==false) {var if_res2370 = M0.raise(e4078);} else {if (M0.caar(l4082)(e4078)!==false) {var begin_res2364 = M0.cdar(l4082)(e4078);var __context2365 = $rjs_core.Marks.getFrames();var __context2366;try {__context2366 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz4079);var __wcm_result2367 = M1.check_for_break();} finally {$rjs_core.Marks.updateFrame(__context2365,__context2366);}__wcm_result2367;var if_res2369 = begin_res2364;} else {var if_res2369 = loop4081(M0.cdr(l4082));}var if_res2370 = if_res2369;}return if_res2370;};var __wcm_result2373 = loop4081(l4080);} finally {$rjs_core.Marks.updateFrame(__context2371,__context2372);}return __wcm_result2373;};var select_handler_by_breaks_as_is = function(e4083, bpz4084, l4085) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l4085)!==false) {var if_res2380 = M0.raise(e4083);} else {if (M0.caar(l4085)(e4083)!==false) {var __context2375 = $rjs_core.Marks.getFrames();var __context2376;try {__context2376 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz4084);M1.check_for_break();var __wcm_result2377 = M0.cdar(l4085)(e4083);} finally {$rjs_core.Marks.updateFrame(__context2375,__context2376);}var if_res2379 = __wcm_result2377;} else {var if_res2379 = select_handler_by_breaks_as_is(e4083,bpz4084,M0.cdr(l4085));}var if_res2380 = if_res2379;}return if_res2380;};var false_thread_cell = M0.make_thread_cell(false);var check_with_handlers_in_context = function(handler_prompt_key4086) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.continuation_prompt_available_p(handler_prompt_key4086)!==false) {var if_res2381 = M0.rvoid();} else {var if_res2381 = M0.error($rjs_core.PrimitiveSymbol.make("with-handlers"),$rjs_core.UString.make("exception handler used out of context"));}return if_res2381;};var handler_prompt_key = M0.make_continuation_prompt_tag($rjs_core.PrimitiveSymbol.make("handler-prompt-tag"));var call_handled_body = function(bpz4087, handle_proc4088, body_thunk4089) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2390 = $rjs_core.Marks.getFrames();var __context2391;try {__context2391 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,false_thread_cell);var __wcm_result2392 = M0.call_with_continuation_prompt(function(bpz4090, body_thunk4091) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2386 = $rjs_core.Marks.getFrames();var __context2387;try {__context2387 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz4090);var __context2382 = $rjs_core.Marks.getFrames();var __context2383;try {__context2383 = __context2382;$rjs_core.Marks.setMark(M1.exception_handler_key,function(e4092) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.abort_current_continuation(handler_prompt_key,e4092);});var __wcm_result2384 = body_thunk4091();} finally {$rjs_core.Marks.updateFrame(__context2382,__context2383);}var __wcm_result2388 = __wcm_result2384;} finally {$rjs_core.Marks.updateFrame(__context2386,__context2387);}return __wcm_result2388;},handler_prompt_key,handle_proc4088,bpz4087,body_thunk4089);} finally {$rjs_core.Marks.updateFrame(__context2390,__context2391);}return __wcm_result2392;};var call_with_exception_handler = function(exnh4093, thunk4094) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2395 = $rjs_core.Marks.getFrames();var __context2396;try {__context2396 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.exception_handler_key,exnh4093);var __wcm_result2397 = thunk4094();} finally {$rjs_core.Marks.updateFrame(__context2395,__context2396);}var begin_res2394 = __wcm_result2397;M0.rvoid();return begin_res2394;};var call_by_cc = M0.__rjs_quoted__.call_with_current_continuation;var not_there = M0.gensym();var do_hash_update = function(who4095, mut_p4096, set4097, ht4098, key4099, xform4100, default4101) {if (arguments.length!==7) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.variable_reference_from_unsafe_p($rjs_core.PrimitiveSymbol.make("#%variable-reference"))!==false) {var if_res2405 = M0.rvoid();} else {if (M0.hash_p(ht4098)!==false) {if (mut_p4096!==false) {var if_res2399 = M0.not(M0.immutable_p(ht4098));} else {var if_res2399 = M0.immutable_p(ht4098);}var if_res2400 = if_res2399;} else {var if_res2400 = false;}if (if_res2400!==false) {var if_res2402 = M0.rvoid();} else {if (mut_p4096!==false) {var if_res2401 = $rjs_core.UString.make("(and/c hash? (not/c immutable?))");} else {var if_res2401 = $rjs_core.UString.make("(and/c hash? immutable?)");}var if_res2402 = M0.raise_argument_error(who4095,if_res2401,ht4098);}if_res2402;if (M0.procedure_p(xform4100)!==false) {var if_res2403 = M0.procedure_arity_includes_p(xform4100,1);} else {var if_res2403 = false;}if (if_res2403!==false) {var if_res2404 = M0.rvoid();} else {var if_res2404 = M0.raise_argument_error(who4095,$rjs_core.UString.make("(any/c . -> . any/c)"),xform4100);}var if_res2405 = if_res2404;}if_res2405;var v4102 = M0.hash_ref(ht4098,key4099,default4101);if (M0.eq_p(v4102,not_there)!==false) {var if_res2406 = M0.raise_mismatch_error(who4095,$rjs_core.UString.make("no value found for key: "),key4099);} else {var if_res2406 = set4097(ht4098,key4099,xform4100(v4102));}return if_res2406;};var cl2407 = function(ht4103, key4104, xform4105, default4106) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_hash_update($rjs_core.PrimitiveSymbol.make("hash-update"),false,M0.hash_set,ht4103,key4104,xform4105,default4106);};var cl2408 = function(ht4107, key4108, xform4109) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return hash_update(ht4107,key4108,xform4109,not_there);};var hash_update = $rjs_core.attachProcedureArity(function() {var fixed_lam2409 = {'4':cl2407,'3':cl2408}[arguments.length];if (fixed_lam2409!==undefined) {return fixed_lam2409.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[3,4]);var cl2410 = function(ht4110, key4111, xform4112, default4113) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_hash_update($rjs_core.PrimitiveSymbol.make("hash-update!"),true,M0.hash_set_bang_,ht4110,key4111,xform4112,default4113);};var cl2411 = function(ht4114, key4115, xform4116) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return hash_update_bang_(ht4114,key4115,xform4116,not_there);};var hash_update_bang_ = $rjs_core.attachProcedureArity(function() {var fixed_lam2412 = {'4':cl2410,'3':cl2411}[arguments.length];if (fixed_lam2412!==undefined) {return fixed_lam2412.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[3,4]);var hash_has_key_p = function(ht4117, key4118) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.hash_p(ht4117)!==false) {var if_res2413 = M0.rvoid();} else {var if_res2413 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("hash-has-key?"),$rjs_core.UString.make("hash?"),0,ht4117,key4118);}if_res2413;return M0.not(M0.eq_p(not_there,M0.hash_ref(ht4117,key4118,not_there)));};var hash_ref_bang_ = function(ht4119, key4120, new4121) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.hash_p(ht4119)!==false) {var if_res2414 = M0.not(M0.immutable_p(ht4119));} else {var if_res2414 = false;}if (if_res2414!==false) {var if_res2415 = M0.rvoid();} else {var if_res2415 = M0.raise_argument_error($rjs_core.PrimitiveSymbol.make("hash-ref!"),$rjs_core.UString.make("(and/c hash? (not/c immutable?))"),0,ht4119,key4120,new4121);}if_res2415;var v4122 = M0.hash_ref(ht4119,key4120,not_there);if (M0.eq_p(not_there,v4122)!==false) {if (M0.procedure_p(new4121)!==false) {var if_res2416 = new4121();} else {var if_res2416 = new4121;}var n4123 = if_res2416;M0.hash_set_bang_(ht4119,key4120,n4123);var if_res2417 = n4123;} else {var if_res2417 = v4122;}return if_res2417;};var __rjs_quoted__ = {};__rjs_quoted__.call_by_cc = call_by_cc;__rjs_quoted__.select_handler_by_no_breaks = select_handler_by_no_breaks;__rjs_quoted__.call_handled_body = call_handled_body;__rjs_quoted__.select_handler_by_breaks_as_is = select_handler_by_breaks_as_is;export { __rjs_quoted__,hash_update_bang_,hash_update,hash_has_key_p,hash_ref_bang_,call_by_cc,call_with_exception_handler,break_paramz_p as break_parameterization_p,call_with_break_parameterization,current_break_parameterization,call_with_parameterization,current_parameterization };